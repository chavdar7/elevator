<!DOCTYPE html>
<html lang="tr">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <title>Asansör Kontrol Sistemi</title>
    </head>


    <body>

        <div class="container">
            <h1>Asansör Kontrol Sistemi</h1>

            <!-- Ana asansör alanı -->
            <div class="elevator-main">
                
                <!-- Kat butonları -->
                <div class="floors-panel">
                    <h3>Kat Çağrıları</h3>
                    <div class="floors-grid" id="floors-grid">
                        <!-- JavaScript ile doldurulacak -->
                    </div>
                </div>
                
                <!-- Asansörler -->
                <div class="elevators-panel">
                    <h3>Asansörler</h3>
                    <div class="elevators-container">
                        
                        <!-- Asansör 1 -->
                        <div class="elevator-box" id="elevator-1">
                            <div class="elevator-header">Asansör 1</div>
                            <div class="elevator-display">
                                <div class="floor-display" id="elevator-1-floor">0</div>
                                <div class="direction-display" id="elevator-1-direction">-</div>
                            </div>
                            <div class="elevator-info">
                                <div class="weight-info" id="elevator-1-weight">0 kg</div>
                                <div class="status-info" id="elevator-1-status">Boş</div>
                            </div>
                            <div class="targets-info" id="elevator-1-targets">Hedef yok</div>
                            <button onclick="openElevatorModal(1)">Asansör 1'e Bin</button>
                            <button onclick="openIndirModal(1)">Yolcu İndir</button>
                        </div>
                        
                        <!-- Asansör 2 -->
                        <div class="elevator-box" id="elevator-2">
                            <div class="elevator-header">Asansör 2</div>
                            <div class="elevator-display">
                                <div class="floor-display" id="elevator-2-floor">0</div>
                                <div class="direction-display" id="elevator-2-direction">-</div>
                            </div>
                            <div class="elevator-info">
                                <div class="weight-info" id="elevator-2-weight">0 kg</div>
                                <div class="status-info" id="elevator-2-status">Boş</div>
                            </div>
                            <div class="targets-info" id="elevator-2-targets">Hedef yok</div>
                            <button onclick="openElevatorModal(2)">Asansör 2'ye Bin</button>
                            <button onclick="openIndirModal(2)">Yolcu İndir</button>
                        </div>
                        
                    </div>
                </div>
                
            </div>

            

            <!-- Asansör içi hedef kat ve kilo modalı -->
            <div id="elevator-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:1000; align-items:center; justify-content:center;">
            <div style="background:white; padding:30px; border-radius:10px; min-width:300px;">
                <h3>Hedef Kat ve Kilo Girin</h3>
                <label>Hedef Kat: <input type="number" id="modal-target-floor" min="-3" max="12"></label><br><br>
                <label>Kilonuz (kg): <input type="number" id="modal-weight" min="1" max="130"></label><br><br>
                <button onclick="submitElevatorTarget()">Gönder</button>
                <button onclick="closeElevatorModal()">İptal</button>
            </div>
            </div>

            <div id="indir-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:1000; align-items:center; justify-content:center;">
            <div style="background:white; padding:30px; border-radius:10px; min-width:300px;">
                <h3>İnen Yolcu Kilosu</h3>
                <label>Kilo (kg): <input type="number" id="indir-weight" min="1" max="130"></label><br><br>
                <button onclick="submitIndir()">Gönder</button>
                <button onclick="closeIndirModal()">İptal</button>
            </div>
            </div>


            
            <!-- Kontrol paneli -->
            <div class="control-panel">
                <h3>Sistem Kontrolü</h3>
                
                <!-- Sistem durumu -->
                <div class="system-status">
                    <div class="status-item">
                        <span>Sistem:</span>
                        <span id="system-status">Çalışıyor</span>
                    </div>
                    <div class="status-item">
                        <span>Bekleyen Çağrı:</span>
                        <span id="waiting-calls">0</span>
                    </div>
                    <div class="status-item">
                        <button onclick="refreshSystem()">Yenile</button>
                        <button onclick="testFlask()">Test</button>
                    </div>
                </div>
                
                <!-- Log alanı -->
                <div class="log-section">
                    <h4>Sistem Logları</h4>
                    <div class="log-container" id="log-container">
                        <div class="log-item">Sistem başlatıldı...</div>
                    </div>
                </div>
                
            </div>
            
            <!-- Test sonucu (gizli) -->
            <div id="test-result" style="display: none;"></div>
        </div>

        <script src="{{ url_for('static', filename='script.js') }}"></script>

    </body>

</html>